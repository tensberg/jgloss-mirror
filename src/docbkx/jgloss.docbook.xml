<?xml version="1.0" encoding="UTF-8" ?>
<!-- JGloss User's Guide Copyright (C) 2001-2015 Michael Koch

 This file is part of JGloss.

 JGloss is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
 (at your option) any later version.

 JGloss is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with JGloss; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

-->
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
    <info>
        <title>JGloss User's Guide</title>

        <author>
            <personname>
                <firstname>Michael</firstname>
                <surname>Koch</surname>
            </personname>
        </author>
        <edition>2.1</edition>
        <copyright>
            <year>2001-2015</year>
            <holder>Michael Koch</holder>
        </copyright>
        <pubdate>2015</pubdate>
    </info>

    <chapter>
        <info>
            <title>Introduction</title>
        </info>
        <section>
            <info>
                <title>About JGloss</title>
            </info>
            <para>
                <application>JGloss</application>
                is an application for adding reading and translation annotations
                to words in a Japanese text document. This can be done automatically and
                manually. When a text document is first opened, words will be looked
                up in dictionary files and the first reading and translation (if any) is used to
                annotate the word. The user can then edit the annotations: choose among the
                readings and translations found in the dictionaries, enter own readings and
                translations, remove annotations and add new annotations. The document
                can be exported as plain text with annotations, HTML (with support for
                the
                <link xlink:href="http://www.w3.org/TR/ruby/">
                    <citetitle>Ruby Annotation</citetitle>
                </link>
                XHTML specification) or LaTeX.
            </para>
            <para>
                The application is designed as a translation aid for people learning Japanese.
                With some new document, you can first skim the text and change the annotations
                to match the likeliest meaning of the word. Then you can print/export the text
                with annotations and start working on the details of understanding the text
                without having to resort to a paper dictionary all the time.
            </para>
            <para>
                <application>JGloss</application> is written in Java and should work on any computer with support
                for <link xlink:href="http://www.java.com/">Java 8 and above</link>.
            </para>
        </section>
        <section>
            <info>
                <title>Acknowledgements</title>
            </info>
            <para>
                <application>JGloss</application>
                is written by Michael Koch (
                <email>tensberg@gmx.net</email>
                ).
                It owes many ideas to Jim Breen's work, particularly the
                <link xlink:href="http://www.dgs.monash.edu.au/~jwb/wwwjdic.html">
                    <application>WWWJDIC</application>
                </link>
                and
                <link xlink:href="http://www.csse.monash.edu.au/~jwb/xjdic/">
                    <application>XJDIC</application>
                </link>.
                The kanji parser is based on
                <link xlink:href="ftp://ftp.monash.edu.au/pub/nihongo/www-jdict.ps.gz">ideas from the WWWJDIC</link>.
                The character encoding detection uses code from Yasuhiro Tonooka's
                <application>kcc</application>
                (Kanji Code Converter).
                The French localization is contributed by Alexandre Beraud.
                Heinrich Künsting helped with the LaTeX export template design and wrote the LaTeX-CJK list
                template.
                Some of the file chooser icons are taken from
                <link xlink:href="http://artists.kde.org">the KDE project</link>.
            </para>
        </section>
        <section>
            <info>
                <title>License</title>
            </info>
            <para>
                <application>JGloss</application>
                is distributed under the terms of the
                <link xlink:href="http://www.gnu.org/licenses/licenses.html#TOCGPL">GNU General Public License</link>
                Version 2 or later.
                It comes with ABSOLUTELY NO WARRANTY. This is free software, and you are
                welcome to redistribute it under certain conditions. Read the
                license for details.
            </para>
        </section>
    </chapter>

    <chapter>
        <info>
            <title>Setting up JGloss</title>
        </info>
        <section xml:id="sect.whatyouneed">
            <info>
                <title>What you need</title>
            </info>
            <para>
                <application>JGloss</application>
                is a Java application. To run it, you will need a Java implementation that
                conforms to the Java specification,
                <abbrev>e. g.</abbrev>
                Oracle's
                <link xlink:href="http://java.sun.com/">
                    <application>Java Runtime Environment</application>
                </link>
                (
                <acronym>JRE</acronym>
                ). The OpenJDK which is installed on many Linux distribution also works.
            </para>
            <para>
                Your computer system should already be configured to work with Japanese text. You must
                have a Japanese font installed. Having a Japanese input method installed is not absolutely
                necessary, but very useful. As a test, if your web browser can display Japanese text, it should
                be possible to set up Java do do the same.
            </para>
            <para>
                To use
                <application>JGloss</application>, you will need some dictionaries.
                Currently supported dictionary formats are:
                <variablelist>
                    <varlistentry>
                        <term>
                            <link xlink:href="http://www.csse.monash.edu.au/~jwb/edict_doc.html">EDICT2</link>
                        </term>
                        <listitem>
                            <para>
                                EDICT dictionaries are Japanese to English word dictionaries. You can download them
                                from the
                                <link xlink:href="http://ftp.cc.monash.edu.au/pub/nihongo/00INDEX.html#dic_fil">
                                    Monash Nihongo FTP Archive
                                </link>
                                . Each dictionary also needs an index file.
                                If no index file is found, it will be created automatically by
                                <application>JGloss</application>
                                and saved in the
                                dictionary directory. Should the index file creation fail, for example because the
                                directory is write-protected, the dictionary can't be used and an error message is
                                shown.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>
                            <link xlink:href="http://www.bibiko.de/dlde.htm">Wadoku Jiten</link>
                        </term>
                        <listitem>
                            <para>
                                The Wadoku Jiten is an extensive Japanese-German dictionary.
                                Current versions of the Wadoku Jiten are available in EDICT2 format
                                from <link xlink:href="http://www.wadoku.de/">wadoku.de</link>
                                To use it, download the file
                                <filename>wadokudict2_201....tar.bz2</filename>
                                from
                                <link xlink:href="http://www.wadoku.de/downloads/">the download page</link>
                                , unpack it
                                and add the unpacked file
                                <filename>wadokudict2</filename>
                                to the list of
                                dictionaries used by
                                <application>JGloss</application>
                                in the dictionary dialog.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>
                            <link xlink:href="http://ftp.cc.monash.edu.au/pub/nihongo/kanjidic_doc.html">KANJIDIC
                            </link>
                        </term>
                        <listitem>
                            <para>
                                KANJIDIC dictionaries contain information about individual kanji, among other things
                                readings and translations. You can find KANJIDIC dictionaries at the same location
                                as the EDICT dictionaries.
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </para>
        </section>

        <section xml:id="sect.running">
            <info>
                <title>
                    Running
                    <application>JGloss</application>
                </title>
            </info>
            <para>
                <application>JGloss</application>
                requires no installation. On a
                <application>Windows</application>
                system with
                the Java Runtime Environment installed,
                double-clicking the
                <filename>jgloss-...jar</filename>
                file should start the application.
                To start
                <application>JGloss</application>
                from a shell, change to the directory which contains the
                <acronym>JAR</acronym>
                file and enter
                <userinput>java -jar jgloss-...jar</userinput>.
                JGloss has some command line options:
                <userinput>java -jar jgloss-...jar [option] file ...</userinput>.
                <variablelist xml:id="sect.options">
                    <info>
                        <title>Options</title>
                    </info>
                    <varlistentry>
                        <term>
                            <option>-h</option>
                        </term>
                        <term>
                            <option>--help</option>
                        </term>
                        <term>
                            <option>/?</option>
                        </term>
                        <listitem>
                            <para>
                                Shows a short help message with the list of options.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>
                            <option>-i</option>
                        </term>
                        <term>
                            <option>--createindex</option>
                        </term>
                        <listitem>
                            <para>
                                Creates index files for the dictionary files given on the command
                                line. The index files will be saved in the current
                                directory.
                                <application>JGloss</application>
                                tries to create an index file for a dictionary file
                                automatically when none is found. If this fails, for example because a normal
                                user has no write permissions for the dictionary directory, you can log in
                                as a privileged user (
                                <abbrev>e. g.</abbrev>
                                administrator or root)
                                and use this option to create the index files.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>
                            <option>-f</option>
                        </term>
                        <term>
                            <option>--format</option>
                        </term>
                        <listitem>
                            <para>
                                Prints the format of the dictionary files given on the command line.
                            </para>
                        </listitem>
                    </varlistentry>

                </variablelist>
            </para>
        </section>
    </chapter>

    <chapter>
        <info>
            <title>Using JGloss</title>
        </info>
        <section>
            <info>
                <title>Quickstart</title>
            </info>
            <para>
                When you start
                <application>JGloss</application>
                for the first time, the welcome wizard is shown. This dialog will guide you to the steps required to import
                your first Japanese text. After you have completed the wizard, the annotated text will be shown in the
                document window.
            </para>
            <figure xml:id="figure.main" floatstyle="normal">
                <info>
                    <title>JGloss Document Window</title>
                </info>
                <screenshot>
                    <mediaobject>
                        <imageobject>
                            <imagedata align="center" fileref="img/main.png" scale="50" />
                        </imageobject>
                        <textobject>
                            <phrase>
                                <application>JGloss</application>
                                document window
                            </phrase>
                        </textobject>
                    </mediaobject>
                </screenshot>
            </figure>
            <para>
                <xref linkend="figure.main" />
                shows the
                <application>JGloss</application>
                window after some text is imported.
                The top-left part of the window shows the annotated document. An annotated word is shown
                in light red, with the reading annotation above and the translation annotation below the
                word. The top-right part of the window shows the list of annotations.
           </para>
           <para>
                The bottom-left part of the window contains the annotation editor. For the selected annotation
                the annotation editor shows the current reading and translation,
                and dictionary form of the entry. You can use the annotation editor
                to change the reading and translation of a word by editing the text in the text fields.
            </para>
            <para>
                The bottom-right part shows dictionary search results for the currently selected text. If you select an
                annotation, the annotated word is automatically searched. Click on a result to use it as the new reading
                or translation. If you select some unannotated text in the top-left document view, it will also be automatically
                searched. Click on the <guibutton>Annotate selection...</guibutton> button to add an annotation for the selected text.
            </para>
            <para>
                The heuristics used for generating the annotations are not perfect.
                For example, if you import a text using the EDICT2 dictionary file,
                <foreignphrase xml:lang="ja">来る</foreignphrase>
                is assigned the reading
                <foreignphrase xml:lang="ja">きたる</foreignphrase>
                instead of
                <foreignphrase xml:lang="ja">くる</foreignphrase>
                and
                <foreignphrase xml:lang="ja">一人</foreignphrase>
                is assigned the reading
                <foreignphrase xml:lang="ja">いちにん</foreignphrase>
                instead of the more common
                <foreignphrase xml:lang="ja">ひとり</foreignphrase>.
                This happens because the application picks the first reading and translation
                found in the dictionary. Also, the algorithm used for verb/adjective deinflection can produce
                false results. What follows is that you should not always trust the automatic annotations, 
                the document will require some editing to be correct.
            </para>
            <para>
                When you have finished editing your document, you can export it to different formats.
                Select
                <guimenuitem>HTML</guimenuitem>
                from the
                <guisubmenu>Export</guisubmenu>
                entry in the
                <guimenu>File</guimenu>
                menu. In the file chooser you can select which type of
                annotations will be written. Select a file name and save the HTML file. If you are using
                <application>Microsoft Internet Explorer</application>
                which already (more or less) supports the
                <citetitle>Ruby Annotation</citetitle>
                XHTML specification, the ruby will be
                rendered above the annotated word by the browser. Translations will be shown in a popup window
                if you move the mouse over a word.
            </para>
        </section>

        <section xml:id="sect.docview">
            <info>
                <title>The Document View</title>
            </info>
            <para>
                The top-left part of the window shows the annotated document. Annotated words will have a colored
                background. You can change the colors or switch them off in the
                <link linkend="sect.prefs.general">preferences dialog</link>
                and toggle the display
                of reading and translation annotations in the
                <link linkend="sect.menu.view">View menu</link>.
                If you left-click on an annotated word, the annotation will be selected in the annotation
                editor. A right-click will select the word and pop up
                a context menu with options for this annotation (see
                <xref linkend="sect.menu.annotation" />
                ). To look up the currently selected text in the dictionaries,
                select
                <guimenuitem>Dictionary Lookup</guimenuitem> from the Edit menu.
            </para>
        </section>

        <section xml:id="sect.annotationeditor">
            <info>
                <title>The Annotation Editor</title>
            </info>
            <para>
                The annotation editor is used to edit the reading and translation annotations of the currently selected annotated
                word in the document. It is displayed in the bottom-left quarter of the
                <application>JGloss</application>
                window
                (see
                <xref linkend="figure.main" />
                ).
            </para>
            <para>
                The dictionary form (word, reading and tranlation) is used for the vocabulary list created by the various export formats.
                Below that, the list of readings for the word as it appears in the document is shown. If a word has no kanji characters,
                the reading will span the whole word. Otherwise, a reading annotation is added
                to every kanji substring of the word.
            </para>
        </section>

        <section xml:id="sect.import">
            <info>
                <title>Importing text documents</title>
            </info>
            <para>
                To create a new annotated document, select
                <guimenuitem>Import</guimenuitem>
                or
                <guimenuitem>Import Clipboard</guimenuitem>
                from the
                <guimenu>File</guimenu>
                menu.
                <guimenuitem>Import Clipboard</guimenuitem>
                will create a new document from the
                content of the system clipboard, the import options can be configured in the
                <link linkend="sect.prefs.general">General Preferences</link>
                dialog.
            </para>
            <para>
                Selecting
                <guimenuitem>Import</guimenuitem>
                will show the
                <guilabel>Import</guilabel>
                dialog. In the text field you can enter
                an HTTP URL or the file name of a local document. The document should be plain text.
                There is some support for importing
                <acronym>HTML</acronym>
                documents, but it will only work
                for documents with simple layout. If you click the
                <guibutton>Choose File</guibutton>
                button, a file chooser dialog will pop up and let you select a local file.
                The character encoding of the file can be selected in the
                <guilabel>Character encoding ...</guilabel>
                popup menu. You can usually
                leave it on the
                <guilabel>&lt;auto&gt;</guilabel>
                setting, which will make
                <application>JGloss</application>
                auto-detect the encoding of the file. If the auto-detection fails for a file and the document is not displayed correctly,
                you can select the encoding manually. You can choose the text parser for the automatic annotation in
                the
                <guilabel>Text Parser</guilabel>
                part of the dialog (see
                <xref linkend="sect.parser" />
                ).
                Clicking the
                <guibutton>Import</guibutton>
                button will import the selected file.
            </para>
            <para>
                If the imported document contains a reading for a annotated word, it
                will be used for the reading annotation, and the first translation found with this reading
                will be used for the translation annotation. Otherwise, the first reading and translation
                found in a dictionary will be used for the annotation. You can change the annotations later
                manually.
            </para>
            <note>
                <para>
                    The
                    <application>JGloss</application>
                    application is quite resource intensive. It can take a rather long time
                    for the newly imported document to be displayed. You should consider splitting a long text
                    in several shorter files before you import it.
                </para>
            </note>
        </section>

        <section xml:id="sect.export">
            <info>
                <title>Exporting annotated documents</title>
            </info>
            <para>
                <application>JGloss</application>
                supports exporting of annotated documents in several formats, described below.
                You can select one of the formats from the
                <guisubmenu>Export</guisubmenu>
                submenu in
                the
                <guimenu>File</guimenu>
                menu.
            </para>
            <para>
                A common option for all formats is the character encoding of the generated file.
                What encoding you use depends mainly on what application you want to use the exported
                file with. Modern web browsers should support all of the encodings. For other applications,
                if you are working on Windows, you should try Shift-JIS and on Linux EUC-JP. If the document
                or your annotations contain characters not in ASCII or the Japanese character set
                (
                <abbrev>e. g.</abbrev>
                German umlauts), you should use UTF-8, which can represent all characters.
            </para>

            <section>
                <info>
                    <title>
                        <acronym>HTML</acronym>
                    </title>
                </info>
                <para>
                    If you export the document in HTML format, the document can viewed in any web browser
                    that supports display of Japanese characters.
                    The document title set in JGloss will be used as the title of the HTML document.
                    The markup defined in the
                    <citetitle>Ruby Annotation</citetitle>
                    specification is used to embed the annotations,
                    browsers which support it will render the annotations above/below the annotated words.
                    Translations are shown using JavaScript
                    in a floating window and the status bar of the browser when the user moves the mouse
                    over an annotated word. In Firefox and other browsers
                    which don't support ruby annotations but support the neccessary JavaScript functions, reading
                    annotations will be shown in a floating window above the annotated word and in the status bar.
                    In other browsers, the
                    reading annotations will be shown in the document after the annotated word, the translations
                    are not available.
                </para>
            </section>

            <section>
                <info>
                    <title>Plain Text</title>
                </info>
                <para>
                    The plain text export function will generate a text document similar to the
                    originally imported document. Annotations will be written after the annotated word,
                    enclosed in brackets.
                </para>
            </section>

            <section xml:id="sect.export.latex">
                <info>
                    <title>LaTeX</title>
                </info>
                <para>
                    The LaTeX export function will generate a text document in LaTeX format.
                    There are several document style variants you can choose from by selecting
                    the corresponding template from the template chooser.
                    You can choose the document font size from the
                    <guilabel>Font size</guilabel>
                    menu.
                </para>
                <para>
                    Standard LaTeX can't handle Japanese documents. JGloss therefore uses the CJK macro package, 
                    which adds support for far eastern scripts.
                    In order to use it, you will have to download and install the macro package and the
                    corresponding font package. On Ubuntu Linux, simply install the package <application>latex-cjk-japanese</application> 
                    (type <userinput>sudo apt-get install latex-cjk-japanese</userinput> in a command prompt).
                    Once the package is installed, you can process the files
                    generated from JGloss with the
                    commands
                    <application>latex</application>
                    or
                    <application>pdflatex</application>.
                </para>
            </section>

            <section>
                <info>
                    <title>Annotation List</title>
                </info>
                <para>
                    The annotation list export function will write a text file listing all annotations
                    in the document. The dictionary form and the selected translation of the annotated
                    word is used. Annotations will only be written once, duplicate entries will be
                    skipped. You can use the generated text as a basis for a vocabulary list.
                </para>
            </section>
        </section>

        <section xml:id="sect.wordlookup">
            <info>
                <title>The Dictionary Lookup Dialog</title>
            </info>
            <para>
                You can look up words in the dictionaries from the word lookup dialog. Enter a Japanese
                or English word in the
                <guilabel>Enter Expression</guilabel>
                text field. The search is performed as soon as you stop typing. The results will be displayed in the lower area
                of the dialog window. The part of the entry which matched the expression will be
                highlighted blue for each result line.
            </para>
            <para>
                You can select the search mode from the
                <guilabel>Search Options</guilabel>
                part of the
                dialog.
                <guilabel>Exact matches</guilabel>
                will only return entries where the entered
                expression is identical to the word, reading or one of the translations of the entry.
                <guilabel>Starts with Expression</guilabel>
                and
                <guilabel>Ends with Expression</guilabel>
                will find entries where the word, reading or one of the translations have the search
                expression at the beginning/end.
                <guilabel>Any Match</guilabel>
                will return entries where the
                search expression appears anywhere within the result. Note that the dictionary formats may not
                support all of the search options. For example, the EDICT implementation does not do "ends with"
                searches for readings so you might not get all possible matches if you use this search mode.
            </para>
            <para>
                You can limit the search to a single dictionary by selecting the
                <guibutton>Search Dictionary</guibutton>
                radio button and selecting the dictionary from
                the popup menu to the right. If the
                <guibutton>Search all Dictionaries</guibutton>
                radio
                button is selected, all dictionaries made available to JGloss in the preferences will
                be searched.
            </para>
            <para>
                The options below <guilabel>Filter Results</guilabel> will limit the search results to dictionary entries which
                are marked with the selected attributes. Not all dictionary format support the attributes. The checkboxes will be disabled
                depending on the selected dictionary. <guilabel>Search Fields</guilabel> lets you limit the search to the word, readings or
                translation parts of the dictionary entries.
            </para>
            <para>
                <guilabel>Field Match Mode</guilabel> controls if the the search option apply to a word in the field (e. g. translation) or the whole
                field. E. g. if you select <guilabel>Exact match</guilabel> and search for <userinput>character</userinput>, the translation 
                <emphasis>Chinese character</emphasis> will only be found if the field match mode is <guilabel>Match words</guilabel>.
            </para>
        </section>

        <section xml:id="sect.parser">
            <info>
                <title>Text Parser selection</title>
            </info>
            <para>
                JGloss can use two different parsers for the automatic annotation of Japanese text, the
                Kanji parser and the ChaSen parser. Select the parser by clicking the respective radio
                button. The ChaSen parser will only be available if the chasen program is installed
                (see below).
            </para>
            <para>
                If the
                <guilabel>annotate first occurrence</guilabel>
                option is selected, each word in a
                document is only annotated the first time it appears. This decreases the RAM usage and
                the time it takes to display the document. The
                <guilabel>Guess paragraph breaks</guilabel>
                option controls how line breaks in the imported document are converted to paragraph breaks.
                If the option is selected, JGloss tries to determine if a line break in the imported document
                signifies the end of a paragraph or if it is used for formatting reasons only. In the second
                case, it will be ignored.
            </para>
            <para>
                Some documents you can find on the internet
                already have reading annotations added to kanji words in the form of some hiragana
                enclosed in brackets after the kanji word. The parsers can generate
                reading annotation entries for these words. You can select the brackets used in the document
                for reading annotations with the
                <guilabel>Brackets used...</guilabel>
                box. If the document
                contains no reading annotations, you can select
                <guilabel>none</guilabel>
                or
                simply ignore this setting.
            </para>
            <section>
                <info>
                    <title>The Kanji parser</title>
                </info>
                <para>
                    The Kanji parser is built into JGloss. A simple heuristic is used for choosing words to annotate:
                    for a sequence of katakana characters, the whole sequence is treated as one word and
                    looked up. For a sequence of kanji characters followed by hiragana characters, the
                    algorithm first looks for possible inflected forms in the hiragana string and will
                    try to find words that consist of the kanji word and the dictionary form of the inflected
                    forms that appear in the hiragana string. If no match is found, only the kanji part
                    is looked up. If still no match is found in any of the dictionaries, prefixes of the
                    kanji word will be tried and if this leads to a match the process will be repeated with
                    the remainder. A consequence of this method is that hiragana words will never be annotated
                    automatically even if they are in the dictionaries.
                </para>
            </section>
            <section>
                <info>
                    <title>The ChaSen parser</title>
                </info>
                <para>
                    The ChaSen parser uses the ChaSen morphological analysis program to decompose Japanese
                    text in words and to derive the base form of inflected words.
                    It is slower than the Kanji parser, but will annotate hiragana words as
                    well as kanji and katakana words. It also does a better job of deinflecting verbs and
                    adjectives. You can download ChaSen
                    from
                    <link xlink:href="http://chasen-legacy.sourceforge.jp/">the ChaSen homepage</link>
                    . On Ubuntu Linux, you can simply install the package <application>chasen</application>
                    (<userinput>sudo apt-get install chasen</userinput>).
                    After installation, you have to set the path to the chasen executable in the
                    <link linkend="sect.prefs.general">preferences dialog</link>
                    . It usually is
                    <filename>/usr/bin/chasen</filename>
                    under Unix or
                    <filename>c:\Program Files\chasen21\chasen.exe</filename>
                    under Windows.
                </para>
                <para>
                    The ChaSen program is used to generate a list of words with their reading and base form from
                    the parsed text. The words will be looked up in the dictionaries, and if an entry is
                    found, an annotation will be generated. If no dictionary entry is found and the word
                    is not inflected, kanji substrings will be tried. A reading annotation with the reading
                    output by ChaSen is also added if the reading returned by ChaSen is different from the first
                    reading found in the dictionaries. Since the ChaSen program uses its own set of dictionaries
                    to detect words, it might not recognize words which are found in the dictionaries used by JGloss
                    but not in the ChaSen dictionaries.
                </para>
            </section>
        </section>

        <section xml:id="sect.preferences">
            <info>
                <title>The Preferences Dialog</title>
            </info>
            <para>
                The preferences dialog contains four panels, one with general preferences,
                one for setting the visual appearance
                of the annotated document, one for managing the dictionaries and one for editing the list
                of words excluded from annotation.
                You can access the dialog by selecting
                <guimenuitem>Preferences</guimenuitem>
                from the
                <guimenu>Edit</guimenu>
                menu.
            </para>
            <section xml:id="sect.prefs.general">
                <info>
                    <title>General</title>
                </info>
                <para>
                    You can select the window opened on startup with the
                    <guilabel>Open empty JGloss document</guilabel>
                    and
                    <guilabel>Open Word Lookup dialog</guilabel>
                    radio buttons.
                    The function of the left mouse button is changed in the
                    <guilabel>Left-clicking an
                        annotated word
                    </guilabel>
                    section of the dialog.
                    The text parser used when importing the clipboard content can be selected in the
                    <guilabel>Import Clipboard Parser</guilabel>
                    section of the dialog. See
                    <xref linkend="sect.parser" />
                    for details. You can set the location of the
                    ChaSen parser program in the
                    <guilabel>ChaSen executable</guilabel>
                    text field.
                    It usually is
                    <filename>/usr/bin/chasen</filename>
                    under Unix or
                    <filename>c:\Program Files\chasen21\chasen.exe</filename>
                    under Windows.
                    If the program cannot be found, the ChaSen parser will not be available.
                </para>
            </section>
            <section xml:id="sect.prefs.style">
                <info>
                    <title>Style</title>
                </info>
                <para>
                    The
                    <guilabel>Japanese User Interface Font</guilabel>
                    lets you choose the font used
                    in the display elements of JGloss. If the default Java fonts don't contain Japanese
                    characters or you want to use a different font, select the
                    <guilabel>Use this font</guilabel>
                    radio button and choose a font from the list.
                    Note that not all fonts in the list can display Japanese characters.
                </para>
                <para>
                    The other font selection options determine the fonts used in the word lookup
                    result list and in the document view.
                    Select a font by using the popup menu. The font size can be selected from the
                    popup menu to the right, or you can enter the font size manually if it is not in
                    the list. You can select a different background color by clicking on the button
                    with the color label, or disable the use of a background color by unchecking the
                    <guilabel>set background color</guilabel>
                    checkbox. The
                    <guilabel>Highlight color ...</guilabel>
                    button lets you select the color
                    which is used for highlighting the currently selected annotation in the document view.
                </para>
            </section>
            <section xml:id="sect.prefs.dictionaries">
                <info>
                    <title>Dictionaries</title>
                </info>
                <para>
                    In this dialog you can set the dictionaries which are used when importing a text
                    or adding annotations to a document manually. 
                    <guibutton>Download dictionaries...</guibutton> opens a dialog which lets you
                    download and install common dictionaries.
                    Click on
                    <guibutton>Add dictionary file</guibutton>
                    to add one or more dictionaries to
                    the list which you have downloaded yourself.
                    <application>JGloss</application>
                    currently supports dictionaries in EDICT2 and KANJIDIC format.
                    To remove a dictionary from the list, select it and click
                    <guibutton>Remove entry</guibutton>.
                </para>
                <para>
                    Since the automatic annotation process will search the dictionaries in the order
                    in which they are displayed in the list and will use the first entry found as default annotation,
                    you should put your preferred dictionary at the top. Select one of the dictionaries
                    and click
                    <guibutton>Move entry up</guibutton>
                    or
                    <guibutton>Move entry down</guibutton>
                    do move it to the desired position.
                </para>
            </section>
            <section xml:id="sect.prefs.exclusions">
                <info>
                    <title>Exclusions</title>
                </info>
                <para>
                    This dialog lets you manage the list of words excluded from automatic annotation.
                    When you import a document, no annotations will be added for the words in
                    this list. You can export and import the list by using the corresponding buttons.
                    The format of the list is simply one word per line.
                </para>
            </section>
        </section>

        <section>
            <info>
                <title>JGloss menus</title>
            </info>

            <section>
                <info>
                    <title>File</title>
                </info>
                <variablelist>
                    <varlistentry>
                        <term>Import</term>
                        <listitem>
                            <para>
                                Creates a new document by importing a text file, annotating it on
                                the fly. See
                                <xref linkend="sect.import" />
                                for details.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Import Clipboard</term>
                        <listitem>
                            <para>
                                Creates a new document by importing the content of the clipboard.
                                See
                                <xref linkend="sect.import" />
                                for details.
                                This item will only be enabled if the clipboard currently contains some
                                text.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Open</term>
                        <listitem>
                            <para>
                                Open a
                                <application>JGloss</application>
                                annotated document.
                            </para>
                            <note>
                                <para>
                                    The application can take rather long to display a document for the first time
                                    after it is loaded, especially for larger documents.
                                </para>
                            </note>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Open Recent</term>
                        <listitem>
                            <para>
                                Open a
                                <application>JGloss</application>
                                annotated document by selecting it from the list of recently
                                opened files.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Save</term>
                        <listitem>
                            <para>
                                Saves the current annotated document in the
                                <application>JGloss</application>
                                file format. If the file name
                                has not yet been determined, a file chooser dialog will be shown.
                            </para>
                            <note>
                                <para>
                                    The
                                    <application>JGloss</application>
                                    file format is a simple XML-based format with JGloss-specific elements.
                                </para>
                            </note>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Save As</term>
                        <listitem>
                            <para>
                                Saves the current document in the
                                <application>JGloss</application>
                                file format under a new name.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Export</term>
                        <listitem>
                            <para>
                                The entries in this submenu let you export the current annotated document in several
                                formats. See
                                <xref linkend="sect.export" />
                                for details.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Print</term>
                        <listitem>
                            <para>
                                Print the annotated document. The current settings for font sizes and colors
                                will be used in the printed document.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Close</term>
                        <listitem>
                            <para>
                                Closes the document window. If the document has unsaved changes, a warning dialog
                                will be shown. If all document windows and the word lookup dialog are closed,
                                the
                                <application>JGloss</application>
                                application will quit.
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sect.menu.edit">
                <info>
                    <title>Edit</title>
                </info>
                <variablelist>
                    <varlistentry>
                        <term>Cut/Copy/Paste</term>
                        <listitem>
                            <para>
                                These have the standard functionality. Note that because the document view
                                is not editable, the
                                <guimenuitem>Cut</guimenuitem>
                                and
                                <guimenuitem>Paste</guimenuitem>
                                items are always disabled.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Dictionary Lookup</term>
                        <listitem>
                            <para>
                                Selecting this item will show the Dictionary Lookup dialog (see
                                <xref linkend="sect.wordlookup" />
                                ). If some text is selected in the current
                                document, this text will be automatically searched using the current dialog
                                settings.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Annotate Selection</term>
                        <listitem>
                            <para>
                                This will let you annotate to the currently selected text.
                            </para>
                            <note>
                                <para>
                                    Annotations cannot overlap. If the selected text already contains annotations,
                                    these annotations will be deleted. Also, an annotation cannot span paragraphs.
                                    If text from more than one paragraph is selected, the annotation will end at
                                    the end of the first paragraph.
                                </para>
                            </note>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Document Title</term>
                        <listitem>
                            <para>
                                Brings up a dialog which lets you set the title of the document. The title
                                is used when the document is exported in HTML or LaTeX format.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Preferences</term>
                        <listitem>
                            <para>
                                Selecting this item will show the preferences dialog (see
                                <xref linkend="sect.preferences" />
                                ).
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sect.menu.view">
                <info>
                    <title>View</title>
                </info>
                <variablelist>
                    <varlistentry>
                        <term>Show Readings</term>
                        <listitem>
                            <para>
                                This item toggles the display of reading annotations in the document view.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Show Translations</term>
                        <listitem>
                            <para>
                                This item toggles the display of translation annotations in the document view.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Show Annotation Tooltips</term>
                        <listitem>
                            <para>
                                If this item is selected, a window will pop up if you move the mouse over an
                                annotation in the document view which show the dictionary form, reading and translation.
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sect.menu.annotation">
                <info>
                    <title>Annotation</title>
                </info>
                <para>
                    The items in this entry manipulate the annotations of the entry currently
                    selected in the annotation editor. The items also appear in the context
                    menu for annotation editor items and annotated words in the document view.
                </para>
                <variablelist>
                    <varlistentry>
                        <term>Remove Annotation</term>
                        <listitem>
                            <para>
                                Removes the annotation from the currently selected word. It will
                                be removed from the annotation editor, and the word will be changed to
                                normal text in the document view.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Add to Exclusions</term>
                        <listitem>
                            <para>
                                Adds the word of the currently selected annotation to the list of
                                words excluded from automatic annotation (see
                                <xref linkend="sect.prefs.exclusions" />
                                ).
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sect.menu.help">
                <info>
                    <title>Help</title>
                </info>
                <variablelist>
                    <varlistentry>
                        <term>Welcome</term>
                        <listitem>
                            <para>
                                Shows the welcome wizard which also shown the first time you start JGloss.
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>About JGloss</term>
                        <listitem>
                            <para>
                                Shows a dialog with information about the JGloss authors and license.
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>
        </section>

    </chapter>

</book>
