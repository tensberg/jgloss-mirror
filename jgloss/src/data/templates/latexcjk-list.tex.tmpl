%encoding: EUC-JP
%short-description: LaTeX-CJK - transl. at end - hyperlinks
%description
% Generate a latex/pdflatex input file which uses the CJK and hyperref
% macro packages. Translations are put in a list after the main text.
% Hyperlinks between text paragraphs and
% vocabulary paragraphs are inserted, and paragraphs are bookmarked.
%
% Run latex twice on the document to get the bookmarks right.
%end description
% This is a EUC-JP encoded Japanese LaTeX document generated
% by JGloss from %document-filename% on %generation-time%.
% The CJK macro package must be installed to process this file.
%
% template-author: Heinrich Kuensting <heinrich.kuensting@gmx.net>
% The template file may be freely redistributed unmodified
% or modified.
% $Id$

\newif\ifpdf
\ifx\pdfoutput\undefined
   \pdffalse
\else
   \pdfoutput=1
   \pdftrue
\fi

\documentclass[%font-size%pt]{article}

\ifpdf
   \usepackage[pdftex]{graphicx}
   \usepackage[pdfpagemode={UseOutlines},        %FullScreen, None
               %pdfauthor={Your name here},
               pdfsubject={Annotated Japanese Document},
               pdfkeywords={JGloss, PDF, PDFLatex, Japan, Japanese},
               pdfstartview={FitBH},
               pdfview={FitBH},
               plainpages={false},
               pdftex,
               colorlinks,
               bookmarks,
               bookmarksopen,
               bookmarksnumbered,
               urlcolor={blue}]{hyperref}
   \pdfcompresslevel=9
\else
   \usepackage{epsf}
   \usepackage[plainpages={false}]{hyperref}
\fi

\usepackage{CJK}
\usepackage[overlap,CJK]{ruby}

\renewcommand{\thefootnote}{}
\newcommand{\fn}[3]{\noindent \makebox[\ww][l]{#1} \makebox[\rw][l]{#2} \parbox[t]{\tw}{#3}}
\newcommand{\para}[1]{\noindent \textbf{Paragraph #1}}

\begin{document}
\begin{CJK*}[dnp]{JIS}{min}
\CJKtilde

\renewcommand{\rubysize}{0.5}
\renewcommand{\rubysep}{-0.3ex}

\pagestyle{myheadings}
\markright{%document-title%}
    
%document-text
%paragraph-start: \\hypertarget{text_para %paragraph-number%}{}\n\\pdfbookmark[1]{Text paragraph %paragraph-number%}{text_para %paragraph-number%}\n\\noindent\\hyperlink{voc_para %paragraph-number%}{\\tiny$\\diamondsuit$}\n
%reading: \\ruby{%word%}{%reading%}
%paragraph-end: \n\n\\bigskip\n\n
%end document-text

\newpage
\small
\markright{%document-title% --- Vocabulary List}
\newlength{\ww}
\settowidth{\ww}{%longest-word%--}
\newlength{\rw}
\settowidth{\rw}{%longest-reading%--}

\newlength{\tw}
\setlength{\tw}{\textwidth}
\addtolength{\tw}{-1.0\ww}
\addtolength{\tw}{-1.0\rw}
\addtolength{\tw}{-5pt}

\hypertarget{Vocabulary}{}
\pdfbookmark[1]{Vocabulary}{Vocabulary}

%annotation-list
%paragraph-start: \\hypertarget{voc_para %paragraph-number%}{\\para{%paragraph-number%}}\n\\pdfbookmark[2]{Vocabulary %paragraph-number%}{voc_para %paragraph-number%}\n\\noindent\\hyperlink{text_para %paragraph-number%}{\\tiny$\\diamondsuit$}\n\n
%paragraph-end: \n\\bigskip\n\n
%translation: \\fn{%word%}{%reading%}{%translation%}\n
%end annotation-list

\end{CJK*}

\end{document}
